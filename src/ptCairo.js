// Centered shape pattern master:
import checkDefs from './helpers/checkDefs';
import checkPattern from './helpers/checkPattern.js';
import patternProperties from './helpers/patternProperties.js';
import arr from './helpers/arr.js';
import pattern from './pattern.js';


export default function ptCairo(S,I) {
	var p = pattern(S,I);
	
	p.base = [[[0.7071067811865476,1.224744871391589],[0.2981726899245648,2.750907676928317],[1.1165716605051963,3.560304443015607],[2.641768897701186,3.161464390300587],[2.2332695867232757,1.6336789626535717]],[[0.7071067811865476,1.224744871391589],[1.1160408724485302,-0.30141793414513884],[0.29764190186789885,-1.1108147002324285],[-1.4190814287039564,0.0028104639365018613],[-0.8190560243501803,0.8158107801296063]],[[3.0426663528105653,0.8152799920729403],[2.6438263000955455,-0.7099172451230495],[4.159364279028645,-1.1113454882890943],[4.977763249609277,-0.3019487222018049],[4.5688291583472935,1.224214083334923]],[[2.641768897701186,3.161464390300587],[4.15989506708531,2.750376888871651],[4.978294037665942,3.5597736549589403],[4.56935994640396,5.0859364604956685],[3.043197140867232,4.677002369233686]],[[-1.2296127377224502,3.1594069879062276],[0.2981726899245648,2.750907676928317],[1.1165716605051963,3.560304443015607],[0.7076375692432135,5.086467248552335],[-0.8185252362935145,4.677533157290352]],[[1.1160408724485302,-0.30141793414513884],[2.6438263000955455,-0.7099172451230495],[3.0426663528105653,0.8152799920729403],[2.2332695867232757,1.6336789626535717],[0.7071067811865476,1.224744871391589]],[[1.1165716605051963,3.560304443015607],[2.641768897701186,3.161464390300587],[3.043197140867232,4.677002369233686],[2.2338003747799418,5.495401339814318],[0.7076375692432135,5.086467248552335]],[[-0.8190560243501803,0.8158107801296063],[0.7071067811865476,1.224744871391589],[0.2981726899245648,2.750907676928317],[-1.2296127377224502,3.1594069879062276],[-1.62845279043747,1.6342097507102378]],[[3.0426663528105653,0.8152799920729403],[4.5688291583472935,1.224214083334923],[4.15989506708531,2.750376888871651],[2.641768897701186,3.161464390300587],[2.2332695867232757,1.6336789626535717]]];

	p.l = 20;
	p.f = ["#2b8cbe","#a8ddb5","#7bccc4","#ccebc5"];
	p.a = 15;
	p.sw = 1;
	
	p.side = function(_) { if(!arguments.length) return p.l; p.l = _; return p; }
	p.fill = function(_)   { if(!arguments.length) return p.f; p.f = _; return p; }
    p.a = 45;
	
	// go about drawing:
	p.add = function() {
		var defs = checkDefs(p.sel);
		var pt = checkPattern(p.sel,defs,p.id);
		patternProperties(pt,p.a,p.id);
		
		var k = p.l/2;
		var w = k * 3.864;
		var c = [0,1,1,1,1,2,2,3,3];
		
		var l = d3.line()
		  .x(function(d) { return d[0]*k; })
		  .y(function(d) { return d[1]*k; })
		
		pt.attr("width", w)
		  .attr("height", w)							
		  .attr("patternUnits","userSpaceOnUse")
	      .attr("patternTransform","rotate("+p.a+")")
	      .attr("id",p.id);		
		
		pt.selectAll("path")
		  .data(p.base)
		  .enter()
		  .append("path")
		  
		pt.selectAll("path")
		  .attr("d",l)
		  .attr("fill",function(d,i) { return p.f[c[i]]; })
		  .attr("stroke", p.s)
		  .attr("stroke-width", p.sw)
		  .attr("opacity",p.o)
		
		return p;
	}
	p.add();
	return p;
}